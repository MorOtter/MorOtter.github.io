const FillInTheBlankTask = () => {
    const options = {
        1: ["Learning", "Underwater basket weaving", "Gaming", "Adventures"],
        2: ["Game", "Spoon juggling", "Entertainment", "Board"],
        3: ["Points", "Glitter explosions", "Rewards", "Tokens"],
        4: ["Leaderboards", "Penguin wrestling", "Rewards", "Levels"],
        5: ["Challenges", "Yodeling contests", "Goals", "Fun"],
        6: ["Education", "Unicorn riding", "Sports", "Adventures"],
        7: ["Motivation", "Donut consumption", "Advancement", "Teaching"],
        8: ["Participation", "Pillow fighting", "Rewards", "Engagement"]
    };

    const correctAnswers = {
        1: "Learning",
        2: "Game",
        3: "Points",
        4: "Leaderboards",
        5: "Challenges",
        6: "Education",
        7: "Motivation",
        8: "Participation"
    };

    const [userAnswers, setUserAnswers] = useState({});
    const [feedback, setFeedback] = useState({});
    const [lockedAnswers, setLockedAnswers] = useState({});

    const handleCheckAnswers = () => {
        const newFeedback = {};
        const newLockedAnswers = {};
        let allCorrect = true;

        Object.keys(correctAnswers).forEach(key => {
            if (userAnswers[key] === correctAnswers[key]) {
                newFeedback[key] = "correct";
                newLockedAnswers[key] = true;  // Lock correct answers
            } else {
                newFeedback[key] = "incorrect";
                allCorrect = false;
            }
        });

        setFeedback(newFeedback);
        setLockedAnswers(newLockedAnswers);

        if (allCorrect) {
            setScore(prev => prev + 100);
            setCompleted(prev => ({ ...prev, fillBlank: true }));
            alert("Great job! You completed the Fill-in-the-Blank challenge!");
        }
    };

    const handleChange = (e, index) => {
        // Only allow changes if the answer is not locked or correct
        if (!lockedAnswers[index]) {
            setUserAnswers(prevState => ({ ...prevState, [index]: e.target.value }));
        }
    };

    return (
        <div className="p-4 bg-blue-50 rounded mb-6">
            <h3 className="font-bold mb-2">What does "Gamification in learning mean?"</h3>
            <p>
                Gamification in&nbsp;
                <select
                    onChange={(e) => handleChange(e, 1)}
                    value={userAnswers[1] || ""}
                    className={`${feedback[1] || ""} ${lockedAnswers[1] ? "pointer-events-none" : ""}`}
                    disabled={lockedAnswers[1]}
                >
                    <option value="">--Select--</option>
                    {options[1].map((opt, index) => (
                        <option key={index} value={opt}>{opt}</option>
                    ))}
                </select>
                &nbsp;is the integration of&nbsp;
                {/* Similar modifications for other selects... */}
                <select
                    onChange={(e) => handleChange(e, 2)}
                    value={userAnswers[2] || ""}
                    className={`${feedback[2] || ""} ${lockedAnswers[2] ? "pointer-events-none" : ""}`}
                    disabled={lockedAnswers[2]}
                >
                    {/* options as before */}
                </select>
                {/* Repeat for all other selects */}
            </p>
            <button
                onClick={handleCheckAnswers}
                className="mt-4 bg-green-500 text-white p-2 rounded"
            >
                Check Answers
            </button>
        </div>
    );
};