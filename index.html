<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamification Learning Adventure</title>
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Styles -->
    <style>
        body {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            font-family: 'Comfortaa', cursive;
        }
        .game-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        .correct { background-color: #d4edda !important; color: #155724; }
        .dragging { opacity: 0.5; }
    </style>
</head>
<body>
    <div id="root" class="min-h-screen flex items-center justify-center p-4"></div>

    <script type="text/babel">
        const { useState } = React;

        const GamificationLearningChallenge = () => {
            const [score, setScore] = useState(0);
            const [completed, setCompleted] = useState({
                timeline: false,
                decoder: false,
                definition: false,
            });

            const HistoricalTimelineChallenge = () => {
                const events = [
                    { id: 1, event: 'Invention of the Printing Press', year: 1440 },
                    { id: 2, event: 'First Online Learning Platform', year: 1990 },
                    { id: 3, event: 'Introduction of Gamification in Education', year: 2010 },
                ];

                const [timeline, setTimeline] = useState([]);

                const handleDrop = (e, year) => {
                    const eventId = e.dataTransfer.getData('eventId');
                    const droppedEvent = events.find((event) => event.id === parseInt(eventId));

                    if (droppedEvent && !timeline.find((item) => item.id === droppedEvent.id)) {
                        const updatedTimeline = [...timeline, { ...droppedEvent, year }];
                        setTimeline(updatedTimeline);

                        // Check if complete after state update
                        const isComplete = events.every((event) =>
                            updatedTimeline.some((item) => item.id === event.id && item.year === event.year)
                        );

                        if (isComplete) {
                            setScore((prev) => prev + 150);
                            setCompleted((prev) => ({ ...prev, timeline: true }));
                            Swal.fire('Correct!', 'You built the timeline correctly!', 'success');
                        }
                    }
                };

                return (
                    <div className="p-6 bg-yellow-50 rounded-lg shadow-lg">
                        <h3 className="text-2xl font-bold mb-4 text-yellow-700">ðŸ“œ Historical Timeline</h3>
                        <p className="mb-4">Drag events to the correct year in history:</p>
                        <div className="flex flex-wrap gap-4">
                            {events.map((event) => (
                                <div
                                    key={event.id}
                                    className="bg-blue-100 text-blue-700 p-2 rounded-lg draggable"
                                    draggable
                                    onDragStart={(e) => e.dataTransfer.setData('eventId', event.id)}
                                >
                                    {event.event}
                                </div>
                            ))}
                        </div>
                        <div className="mt-4">
                            {[1440, 1990, 2010].map((year) => (
                                <div
                                    key={year}
                                    className="p-4 border-dashed border-2 border-gray-400 rounded-lg mb-4"
                                    onDragOver={(e) => e.preventDefault()}
                                    onDrop={(e) => handleDrop(e, year)}
                                >
                                    Year: {year}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            return (
                <div className="game-container p-8 max-w-4xl mx-auto text-center">
                    <h1 className="text-4xl font-bold text-gray-800 mb-6">ðŸŽ® Gamification Learning Adventure</h1>
                    <p className="text-gray-600 mb-4">Your Score: {score}</p>
                    <div className="mb-8">
                        <HistoricalTimelineChallenge />
                    </div>
                    <div>
                        {completed.timeline && <p className="text-green-600 font-bold">âœ… Timeline Challenge Complete!</p>}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GamificationLearningChallenge />, document.getElementById('root'));
    </script>
</body>
</html>
