<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamification Learning Adventure</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            font-family: 'Comfortaa', cursive;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .correct {
            background-color: #d4edda !important;
            color: #155724;
        }

        .dragging {
            opacity: 0.5;
        }

        .aesthetic-choice {
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .aesthetic-choice:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <div id="root" class="min-h-screen flex items-center justify-center p-4"></div>

    <script type="text/babel">
        const { useState } = React;

        const GamificationLearningChallenge = () => {
            const [score, setScore] = useState(0);
            const [completed, setCompleted] = useState({
                timeline: false,
                definition: false,
                aesthetics: false,
                decoder: false,
            });

            // Aesthetic Choices Challenge
            const AestheticChoicesChallenge = () => {
                const options = [
                    { id: 'minimalism', text: 'Minimalist Design', correct: true },
                    { id: 'clutter', text: 'Cluttered Layout', correct: false },
                    { id: 'high_contrast', text: 'High Contrast Colors', correct: true },
                    { id: 'random_theme', text: 'Random Themes', correct: false },
                ];

                const [selected, setSelected] = useState([]);

                const toggleSelection = (id) => {
                    setSelected((prev) =>
                        prev.includes(id) ? prev.filter((item) => item !== id) : [...prev, id]
                    );
                };

                const checkChoices = () => {
                    const correctChoices = options.filter((opt) => opt.correct).map((opt) => opt.id);
                    const isCorrect = correctChoices.every((id) => selected.includes(id)) &&
                        selected.length === correctChoices.length;

                    if (isCorrect) {
                        setScore((prev) => prev + 100);
                        setCompleted((prev) => ({ ...prev, aesthetics: true }));
                        Swal.fire('Great!', 'You made the right aesthetic choices!', 'success');
                    } else {
                        Swal.fire('Oops!', 'Some choices are incorrect. Try again!', 'error');
                    }
                };

                return (
                    <div className="p-6 bg-green-50 rounded-lg shadow-lg">
                        <h3 className="text-2xl font-bold mb-4 text-green-700">🎨 Aesthetic Choices</h3>
                        <p className="mb-4">Select the design principles that enhance learning:</p>
                        <div className="grid grid-cols-2 gap-4">
                            {options.map((opt) => (
                                <div
                                    key={opt.id}
                                    className={`aesthetic-choice p-4 rounded-lg border-2 ${
                                        selected.includes(opt.id) ? 'border-green-500' : 'border-gray-300'
                                    }`}
                                    onClick={() => toggleSelection(opt.id)}
                                >
                                    {opt.text}
                                </div>
                            ))}
                        </div>
                        <button
                            onClick={checkChoices}
                            className="mt-4 w-full bg-gradient-to-r from-green-400 to-blue-500 text-white p-2 rounded hover:from-green-500 hover:to-blue-600"
                        >
                            Submit Choices
                        </button>
                    </div>
                );
            };

            // Gamification Decoder Challenge
            const GamificationElementsDecoder = () => {
                const matchings = [
                    { gameElement: '🏆 Points', learningTransformation: 'Motivation tracking' },
                    { gameElement: '📈 Levels', learningTransformation: 'Progress visualization' },
                    { gameElement: '🎖️ Badges', learningTransformation: 'Achievement recognition' },
                    { gameElement: '🏅 Leaderboards', learningTransformation: 'Competitive learning' },
                ];

                const [matches, setMatches] = useState(matchings.map((m) => ({ ...m, matched: false })));
                const [draggedItem, setDraggedItem] = useState(null);

                const handleDragStart = (e, item) => {
                    setDraggedItem(item);
                    e.target.classList.add('dragging');
                };

                const handleDragEnd = (e) => {
                    e.target.classList.remove('dragging');
                };

                const handleDragOver = (e) => {
                    e.preventDefault();
                };

                const handleDrop = (e, targetItem) => {
                    if (!draggedItem) return;

                    const updatedMatches = matches.map((m) =>
                        m.learningTransformation === targetItem.learningTransformation
                            ? { ...m, matched: m.gameElement === draggedItem.gameElement }
                            : m
                    );

                    setMatches(updatedMatches);

                    const allMatched = updatedMatches.every((m) => m.matched);
                    if (allMatched) {
                        setScore((prev) => prev + 150);
                        setCompleted((prev) => ({ ...prev, decoder: true }));
                        Swal.fire(
                            'Decoded!',
                            'You matched all game elements to their learning transformations!',
                            'success'
                        );
                    }
                };

                return (
                    <div className="p-6 bg-purple-50 rounded-lg shadow-lg">
                        <h3 className="text-2xl font-bold mb-4 text-purple-700">🧩 Gamification Decoder</h3>
                        <p className="mb-4 text-gray-600">Match game elements to their learning transformations!</p>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                {matches.map((match, index) => (
                                    <div
                                        key={index}
                                        className="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-lg mb-4 draggable transform transition-all hover:scale-105"
                                        draggable
                                        onDragStart={(e) => handleDragStart(e, match)}
                                        onDragEnd={handleDragEnd}
                                    >
                                        {match.gameElement}
                                    </div>
                                ))}
                            </div>
                            <div>
                                {matches.map((match, index) => (
                                    <div
                                        key={index}
                                        className="bg-white p-4 rounded-lg mb-4 border-2 border-dashed border-gray-300"
                                        onDragOver={handleDragOver}
                                        onDrop={(e) => handleDrop(e, match)}
                                    >
                                        {match.learningTransformation}
                                        {match.matched && <span className="ml-2">✅</span>}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="game-container w-full max-w-6xl mx-auto p-8">
                    <h1 className="text-4xl font-bold mb-8 text-center text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-500">
                        Gamification Learning Adventure
                    </h1>

                    <div className="grid md:grid-cols-2 gap-8 mb-8">
                        <div className="challenge-card">
                            {/* Placeholder for HistoricalTimelineChallenge */}
                        </div>
                        <div className="challenge-card">
                            <AestheticChoicesChallenge />
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-8 mb-8">
                        <div className="challenge-card">
                            {/* Placeholder for FillInTheBlanks */}
                        </div>
                        <div className="challenge-card">
                            <GamificationElementsDecoder />
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-lg shadow-lg">
                        <h3 className="text-2xl font-bold mb-4 text-center">🏆 Your Learning Quest</h3>
                        <div className="w-full bg-gray-200 rounded-full h-4 mb-4">
                            <div 
                                className="progress-bar h-4 rounded-full" 
                                style={{ width: `${score}%` }}
                            ></div>
                        </div>
                        <div className="flex justify-between items-center">
                            <span className="text-lg font-semibold">Total Score: {score} points</span>
                            <div className="flex space-x-2">
                                {Object.entries(completed).map(([key, value]) => (
                                    <span 
                                        key={key} 
                                        className={`p-2 rounded-full ${
                                            value 
                                                ? 'bg-green-500 text-white achievement-badge completed' 
                                                : 'bg-gray-300'
                                        }`}
                                    >
                                        {key}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GamificationLearningChallenge />, document.getElementById('root'));
    </script>
</body>

</html>
