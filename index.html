<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamification Learning Quest</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .correct { background-color: #d4edda; }
        .incorrect { background-color: #f8d7da; }
        .draggable { cursor: move; user-select: none; }
        .dragging { opacity: 0.5; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const GamificationLearningQuest = () => {
            const [score, setScore] = useState(0);
            const [completed, setCompleted] = useState({
                fillBlank: false,
                timeline: false
            });

            // --- Fill-in-the-Blank Task ---
            const FillInTheBlankTask = () => {
                const options = {
                    1: ["Learning", "Underwater basket weaving", "Gaming", "Adventures"],
                    2: ["Game", "Spoon juggling", "Entertainment", "Board"],
                    3: ["Points", "Glitter explosions", "Rewards", "Tokens"],
                    4: ["Leaderboards", "Penguin wrestling", "Rewards", "Levels"],
                    5: ["Challenges", "Yodeling contests", "Goals", "Fun"],
                    6: ["Education", "Unicorn riding", "Sports", "Adventures"],
                    7: ["Motivation", "Donut consumption", "Advancement", "Teaching"],
                    8: ["Participation", "Pillow fighting", "Rewards", "Engagement"]
                };

                const correctAnswers = {
                    1: "Learning",
                    2: "Game",
                    3: "Points",
                    4: "Leaderboards",
                    5: "Challenges",
                    6: "Education",
                    7: "Motivation",
                    8: "Participation"
                };

                const [userAnswers, setUserAnswers] = useState({});
                const [feedback, setFeedback] = useState({});

                const handleCheckAnswers = () => {
                    const newFeedback = {};
                    let allCorrect = true;

                    Object.keys(correctAnswers).forEach(key => {
                        if (userAnswers[key] === correctAnswers[key]) {
                            newFeedback[key] = "correct";
                        } else {
                            newFeedback[key] = "incorrect";
                            allCorrect = false;
                        }
                    });

                    setFeedback(newFeedback);

                    if (allCorrect) {
                        setScore(prev => prev + 100);
                        setCompleted(prev => ({ ...prev, fillBlank: true }));
                        alert("Great job! You completed the Fill-in-the-Blank challenge!");
                    }
                };

                return (
                    <div className="p-4 bg-blue-50 rounded mb-6">
                        <h3 className="font-bold mb-2">What does "Gamification in learning mean?"</h3>
                        <p>
                            Gamification in&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 1: e.target.value }))}
                                className={feedback[1]}
                            >
                                <option value="">--Select--</option>
                                {options[1].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>
                            &nbsp;is the integration of&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 2: e.target.value }))}
                                className={feedback[2]}
                            >
                                <option value="">--Select--</option>
                                {options[2].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>
                            mechanics, such as&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 3: e.target.value }))}
                                className={feedback[3]}
                            >
                                <option value="">--Select--</option>
                                {options[3].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>,
                            badges,&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 4: e.target.value }))}
                                className={feedback[4]}
                            >
                                <option value="">--Select--</option>
                                {options[4].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>,
                            and&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 5: e.target.value }))}
                                className={feedback[5]}
                            >
                                <option value="">--Select--</option>
                                {options[5].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>, like&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 6: e.target.value }))}
                                className={feedback[6]}
                            >
                                <option value="">--Select--</option>
                                {options[6].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>
                            &nbsp;to engage learners and enhance their&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 7: e.target.value }))}
                                className={feedback[7]}
                            >
                                <option value="">--Select--</option>
                                {options[7].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>
                            and&nbsp;
                            <select
                                onChange={(e) => setUserAnswers((prevState) => ({ ...prevState, 8: e.target.value }))}
                                className={feedback[8]}
                            >
                                <option value="">--Select--</option>
                                {options[8].map((opt, index) => (
                                    <option key={index} value={opt}>{opt}</option>
                                ))}
                            </select>.
                        </p>
                        <button
                            onClick={handleCheckAnswers}
                            className="mt-4 bg-green-500 text-white p-2 rounded"
                        >
                            Check Answers
                        </button>
                    </div>
                );
            };

            // --- Historical Timeline Task ---
            const HistoricalTimelineTask = () => {
                const [milestones, setMilestones] = useState([
                    { id: 1, text: "Video game concept of points/levels" },
                    { id: 2, text: "Term 'Gamification' coined by Nick Pelling" },
                    { id: 3, text: "First educational gamification studies" },
                    { id: 4, text: "Widespread adoption in corporate training" }
                ]);

                // Shuffle the milestones array
                useEffect(() => {
                    const shuffledMilestones = [...milestones].sort(() => Math.random() - 0.5);
                    setMilestones(shuffledMilestones);
                }, []);

                const [draggedItem, setDraggedItem] = useState(null);

                const handleDragStart = (e, item) => {
                    setDraggedItem(item);
                };

                const handleDrop = (e, targetItem) => {
                    if (!draggedItem) return;
                    const newMilestones = milestones.map(m =>
                        m.id === targetItem.id ? draggedItem :
                        m.id === draggedItem.id ? targetItem : m
                    );
                    setMilestones(newMilestones);
                    setDraggedItem(null);
                };

                const checkOrder = () => {
                    const correctOrder = [1, 2, 3, 4];
                    const isCorrect = milestones.map(m => m.id).every((id, index) => id === correctOrder[index]);
                    if (isCorrect) {
                        setScore(prev => prev + 100);
                        setCompleted(prev => ({ ...prev, timeline: true }));
                        alert("Well done! You ordered the timeline correctly.");
                    } else {
                        alert("Try again! The order is incorrect.");
                    }
                };

                return (
                    <div className="p-4 bg-yellow-50 rounded mb-6">
                        <h3 className="font-bold mb-2">Historical Timeline Challenge</h3>
                        <p className="text-gray-600 mb-2">Drag the milestones into the correct order:</p>
                        <div>
                            {milestones.map((milestone, index) => (
                                <div
                                    key={milestone.id}
                                    draggable
                                    onDragStart={(e) => handleDragStart(e, milestone)}
                                    onDragOver={(e) => e.preventDefault()}
                                    onDrop={(e) => handleDrop(e, milestone)}
                                    className="bg-white p-2 mb-2 shadow rounded draggable"
                                >
                                    {index + 1}. {milestone.text}
                                </div>
                            ))}
                        </div>
                        <button onClick={checkOrder} className="mt-4 bg-blue-500 text-white p-2 rounded">
                            Check Timeline
                        </button>
                    </div>
                );
            };

            return (
                <div className="bg-gray-100 p-6 rounded-lg max-w-4xl mx-auto">
                    <h2 className="text-2xl font-bold mb-4">Gamification Learning Quest</h2>
                    <FillInTheBlankTask />
                    <HistoricalTimelineTask />
                    <p className="italic text-gray-500">(Source: Kapp, K. M. (2012). The Gamification of Learning and Instruction)</p>
                </div>
            );
        };

        ReactDOM.render(<GamificationLearningQuest />, document.getElementById('root'));
    </script>
</body>
</html>
